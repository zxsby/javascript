## 浏览器的事件环 （代码执行顺序）

- js的"主线程"是单线程

## 进程的概念

- 计算机在调度任务时 是以进程为单位，也是分配任务的最小单位
- 浏览器他是一个多进程的 （每一个页卡都是一个进程）
- 浏览器有一个主进程 用户的界面
- 每个页卡里，都有一个渲染进程 （浏览器内核）
- 处理请求 网络进程
- 绘图绘制 GPU渲染进程
- 其他的 浏览器插件

> 渲染进程（包含多个线程） 

- ui渲染线程
- js引擎 执行js （ui 和 js 是互斥的 共用同一个线程）
- 事件线程 click  定时器 setTimout  ajax也是一个独立的线程
- 单独的调度线程 处理事件 处理定时器到时间 ajax成功或失败了（事件触发线程 EventLoop）



- 常见的方法 "异步的方法" 方法分为两类 宏任务 （宿主环境提供的异步方法 都是宏任务 定时器等） 微任务 （语言标准提供的 promise.then mutationObserver） 


## js的执行顺序

- 默认代码是从上向下执行的 执行环境是通过script来执行的 （宏任务）
- 在代码执行的过程中 调用定时器 promise click ... 事件,不会立即执行 需要等待当前代码全部执行完毕
- 给异步方法划分队列 分别存放到 微任务（立即存放） 和 宏任务（时间到了或者事情发生了再存放）队列中
- script执行完毕后，会清空所有的微任务
- 执行完毕后会渲染页面 （ui渲染） 不是每次都会调用渲染
- 再去宏任务队列中看有没有到达时间的拿出来其中一个来执行
- 执行完毕后，按照上述步骤不同的循环

